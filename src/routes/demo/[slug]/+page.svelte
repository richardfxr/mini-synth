<script lang="ts">
    /* === IMPORTS ============================ */
    // Svelte
    import { onMount } from 'svelte';
    import { goto } from '$app/navigation';
    import { page } from '$app/stores';
    // Dexie
    import { db } from "../../../storage/db";
    // types
    import type { Song } from '../../../storage/db';

    /* === CONSTANTS ========================== */
    const slug = $page.params.slug;
    const demos: {[key: string]: Song } = {
        "marble-machine": {
            title: "Marble Machine - Wintergatan",
            melody:[
                ["E3", "E5"],
                [],
                ["G3", "B3"],
                ["B4"],
                [],
                [],
                ["G3", "B3"],
                ["A4"],
                ["E3", "G4"],
                ["A4"],
                ["G3", "B3"],
                ["B4"],
                [],
                ["G4"],
                ["G3", "B3", "A4"],
                ["D5"],

                ["G3"],
                [],
                ["B3", "D4"],
                ["B4"],
                [],
                [],
                ["B3", "D4"],
                ["A4"],
                ["G3", "G4"],
                ["A4"],
                ["B3", "D4"],
                ["Gb4"],
                [],
                ["G4"],
                ["B3", "D4", "A4"],
                ["D5"],

                ["Gb3"],
                [],
                ["B3", "D4"],
                ["B4"],
                [],
                [],
                ["B3", "D4"],
                ["D5"],
                ["Gb3", "C5"],
                ["B4"],
                ["B3", "D4"],
                ["A4"],
                [],
                ["G4"],
                ["B3", "D4", "A4"],
                ["E4"]
                ],
                beats:[
                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],
                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],
                    
                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],
                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],

                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],
                ["kc"],
                [],
                ["sn", "kc"],
                [],
                ["kc"],
                [],
                ["sn", "kc"],
                ["kc"],
            ],
            bpm: 80,
        },
        "we-will-rock-you": {
            title: "We Will Rock You - Queen",
            melody:[
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                ["C4"],
                ["D4"],
                ["D4"],
                ["C4"],
                ["D4"],
                [],
                ["D4"],
                ["C4"],
                ["D4"],
                [],
                ["D4"],
                [],
                ["C4"],
                ["D4"],
                ["D4"],
                ["C4"],
                ["D4"],
                [],
                ["D4"],
                ["C4"],
                ["D4"],
                ["C4"],
                ["D4"],
                [],
                ["G4"],
                [],
                ["F4"],
                [],
                ["F4"],
                ["C4"],
                ["D4"],
                [],
                ["D4"],
                ["D4"],
                [],
                ["C4"],
                ["D4"],
                [],
                [],
                ["G3"],
                ["D4"],
                [],
                ["D4"],
                [],
                ["D4"],
                [],
                [],
                [],
                ["C4"],
                ["C4"],
                [],
                ["C4"],
                ["C4"],
                [],
                ["G3"],
                ["A3"],
                ["G3"],
                ["F3"],
                ["D3"],
                [],
                ["D3"],
                [],
                ["A3"],
                ["C4"],
                ["F4", "F3"],
                [],
                [],
                [],
                ["E3", "E4"],
                [],
                [],
                [],
                ["D4", "D3"],
                [],
                [],
                [],
                ["C4", "C3"],
                [],
                [],
                [],
                ["D3", "A3", "D4"],
                [],
                ["D3", "A3", "D4"],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                ["F3", "F4", "A4"],
                [],
                [],
                [],
                ["E3", "E4", "G4"],
                [],
                [],
                [],
                ["F4", "D4", "D3"],
                [],
                [],
                [],
                ["C3", "C4", "E4"],
                [],
                [],
                [],
                ["D3", "A3", "E4", "F4"],
                [],
                ["D3", "A3", "E4", "F4"],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
                ["C4", "D3"],
                ["D4", "D3"],
                ["D4", "D3"],
                ["C4", "D3"],
                ["D4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["D3"],
                ["C4", "D3"],
                ["D4", "D3"],
                ["D4", "D3"],
                ["C4", "D3"],
                ["D4", "D3"],
                ["F3"],
                ["D4", "F3"],
                ["C4", "F3"],
                ["D4", "D3"],
                ["D4", "F3"],
                ["F3"],
                ["D4", "F3"],
                ["D3", "G4"],
                ["F3"],
                ["F4", "F3"],
                ["F3"],
                ["F4", "D3"],
                ["D3"],
                ["C4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["D4", "D3"],
                ["D3"],
                ["C4", "D3"],
                ["D4", "D3"],
                ["F3"],
                ["F3"],
                ["F3", "D3"],
                ["D4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["D3"],
                ["D4", "D3"],
                ["A3", "D3"],
                ["A3", "D3"],
                ["A3", "D3"],
                ["C4", "D3"],
                ["C4", "D3"],
                ["C4", "D3"],
                ["D3"],
                ["C4", "D3"],
                ["C4", "D3", "F3"],
                ["F3", "G3", "D3"],
                ["F3", "A3", "D3"],
                ["G3", "D3"],
                ["F3", "D3"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["A3", "D3"],
                ["A3", "D3"],
                ["A3", "D3"],
                ["F3", "F4", "A4", "D3"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["G4", "E4", "E3", "D3"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["D4", "F4", "D3"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["C4", "E4", "G3", "C3"],
                ["C3"],
                ["G3", "C3"],
                ["C3"],
                ["D4", "F4", "D3"],
                [],
                ["D4", "F4", "D3"],
                [],
            ],
            beats:[
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
                ["hh"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                [],
            ],
            bpm: 80,
        },
        "twinkle-twinkle": {
            title: "Twinkle, Twinkle, Little Star",
            melody: [
                ["C3"],
                [],
                ["C3"],
                [],
                ["G3"],
                [],
                ["G3"],
                [],
                ["A3"],
                [],
                ["A3"],
                [],
                ["G3"],
                [],
                [],
                ["F3"],
                [],
                ["F3"],
                [],
                ["E3"],
                [],
                ["E3"],
                [],
                ["D3"],
                [],
                ["D3"],
                [],
                ["C3"],
                [],
                [],
                [],
                ["G3"],
                [],
                ["G3"],
                [],
                ["F3"],
                [],
                ["F3"],
                [],
                ["E3"],
                [],
                ["E3"],
                [],
                ["D3"],
                [],
                [],
                ["G3"],
                [],
                ["G3"],
                [],
                ["F3"],
                [],
                ["F3"],
                [],
                ["E3"],
                [],
                ["E3"],
                [],
                ["D3"],
                [],
                [],
                [],
                ["C3"],
                [],
                ["C3"],
                [],
                ["G3"],
                [],
                ["G3"],
                [],
                ["A3"],
                [],
                ["A3"],
                [],
                ["G3"],
                [],
                [],
                ["F3"],
                [],
                ["F3"],
                [],
                ["E3"],
                [],
                ["E3"],
                [],
                ["D3"],
                [],
                ["D3"],
                [],
                ["C3"],
                [],
                [],
            ],
            beats: Array(92).fill([]),
            bpm: 70,
        },
        "save-your-tears": {
            title: "Save Your Tears - The Weeknd",
            melody: [
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                [],
                [],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G4"],
                ["C4", "C5"],
                ["C4", "C5"],
                ["C4"],
                ["C4", "C5"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "A4"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "D5"],
                ["A3", "B4"],
                ["A3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3"],
                ["E3", "B4"],
                ["G3"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "B4"],
                ["G3", "C5"],
                ["G3", "C5"],
                ["G3"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G4"],
                ["C4", "C5"],
                ["C4", "C5"],
                ["C4"],
                ["C4", "C5"],
                ["A3"],
                ["A3", "C5"],
                ["A3", "C5"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "D5"],
                ["A3", "B4"],
                ["A3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3"],
                ["E3", "B4"],
                ["G3"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "B4"],
                ["G3", "C5"],
                ["G3", "C5"],
                ["G3"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G5"],
                ["C4", "E5"],
                ["C4", "G5"],
                ["A3", "E5"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3", "G5"],
                ["A3"],
                ["A3"],
                ["E3", "A5"],
                ["E3", "E5"],
                ["E3", "E5"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3", "G5"],
                ["G3"],
                ["G3", "F5"],
                ["G3"],
                ["G3", "E5"],
                ["G3"],
                ["G3", "F5"],
                ["G3", "E5"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G5"],
                ["C4", "E5"],
                ["C4", "G5"],
                ["A3", "E5"],
                ["A3"],
                ["A3"],
                ["A3", "D5"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3", "G5"],
                ["E3", "A5"],
                ["E3", "E5"],
                ["E3", "E5"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3", "G5"],
                ["G3"],
                ["G3", "F5"],
                ["G3"],
                ["G3", "E5"],
                ["G3"],
                ["G3", "F5"],
                ["G3", "E5"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G4"],
                ["C4", "C5"],
                ["C4", "C5"],
                ["C4"],
                ["C4", "C5"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "A4"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "D5"],
                ["A3", "B4"],
                ["A3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3"],
                ["E3", "B4"],
                ["G3"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3"],
                ["G3", "B4"],
                ["G3", "C5"],
                ["G3", "C5"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G4"],
                ["C4", "E5"],
                ["C4", "D5"],
                ["C4"],
                ["C4", "D5"],
                ["A3"],
                ["A3", "C5"],
                ["A3", "C5"],
                ["A3", "A4"],
                ["A3", "C5"],
                ["A3", "D5"],
                ["A3", "B4"],
                ["A3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3", "B4"],
                ["E3"],
                ["E3", "B4"],
                ["G3"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "G4"],
                ["G3", "B4"],
                ["G3", "C5"],
                ["G3"],
                ["G3", "D5"],
                ["C4", "C5"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G5"],
                ["C4", "E5"],
                ["C4", "G5"],
                ["A3", "E5"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3", "G5"],
                ["A3"],
                ["A3"],
                ["E3", "A5"],
                ["E3", "E5"],
                ["E3", "E5"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3", "A5"],
                ["G3"],
                ["G3", "G5"],
                ["G3"],
                ["G3", "F5"],
                ["G3"],
                ["G3", "G5"],
                ["G3", "F5"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4"],
                ["C4", "G5"],
                ["C4", "E5"],
                ["C4", "G5"],
                ["A3", "E5"],
                ["A3"],
                ["A3"],
                ["A3", "D5"],
                ["A3"],
                ["A3"],
                ["A3"],
                ["A3", "G5"],
                ["E3", "A5"],
                ["E3", "E5"],
                ["E3", "E5"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3", "G5"],
                ["G3"],
                ["G3", "F5"],
                ["G3"],
                ["G3", "E5"],
                ["G3"],
                ["G3", "D5"],
                ["G3", "F5"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["D3"],
                ["D3", "G5"],
                ["D3", "A5"],
                ["D3"],
                ["D3", "E5"],
                ["A3"],
                ["A3"],
                ["A3", "D5"],
                ["A3", "C5"],
                ["A3", "C5"],
                ["A3", "D5"],
                ["A3", "D5"],
                ["A3"],
                ["F3", "C5"],
                ["F3"],
                ["F3"],
                ["F3"],
                ["F3", "G5"],
                ["F3", "A5"],
                ["F3"],
                ["F3", "E5"],
                ["G3"],
                ["G3", "D5"],
                ["G3"],
                ["G3", "C5"],
                ["G3", "C5"],
                ["G3", "D5"],
                ["G3"],
                ["G3"],
                ["C3", "C4", "E5"],
                [],
                [],
                [],
                ["C5"],
                [],
                [],
                [],
                ["A3", "A4", "G5"],
                [],
                ["C5"],
                ["C5"],
                ["C5"],
                ["D5"],
                ["B4"],
                [],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3", "G5"],
                ["G3"],
                ["G3", "F5"],
                ["G3"],
                ["G3", "E5"],
                ["G3"],
                ["G3", "F5"],
                ["G3", "E5"],
                ["C3", "C4", "E5"],
                [],
                [],
                [],
                ["C5"],
                [],
                [],
                [],
                ["A3", "A4", "G5"],
                [],
                ["C5"],
                ["C5"],
                ["C5"],
                ["D5"],
                ["B4"],
                [],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["E3"],
                ["G3"],
                ["G3"],
                [],
                ["G3"],
                ["G3"],
                [],
                [],
                [],
                [],
                [],
                [],
                [],
            ],
            beats: [
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["sn", "kc"],
                ["sn"],
                ["sn"],
                ["sn"],
                ["sn", "kc"],
                [],
                ["kc"],
                ["kc"],
                [],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                ["kc"],
                [],
                [],
                [],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["sn", "kc"],
                ["sn"],
                ["sn"],
                ["sn"],
                ["kc", "sn"],
                [],
                ["kc"],
                ["kc"],
                [],
                [],
                [],
                [],
                ["kc"],
                [],
                ["kc"],
                ["kc"],
                ["kc"],
                [],
                [],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                [],
                ["sn"],
                [],
                ["kc"],
                ["kc"],
                [],
                ["kc"],
                ["kc"],
                [],
                [],
                ["t1"],
                [],
                [],
                [],
                [],
            ],
            bpm: 70,
        }
    };

    let song: Song | null = null;

    if (Object.hasOwn(demos, slug)) 
        song = demos[slug];

    /* === LIFECYCLES ========================= */
    onMount(async () => {
        if (song) {
            // create new song in database
            try {
                const id = await db.songs.add({
                    title: song.title,
                    melody: song.melody,
                    beats: song.beats,
                    bpm: song.bpm,
                });

                goto('/song/' + id, { replaceState: true });
            } catch (error) {
                console.log("new song error: " + error);
            }
        } else {
            goto('/', { replaceState: true });
        }
    });
</script>